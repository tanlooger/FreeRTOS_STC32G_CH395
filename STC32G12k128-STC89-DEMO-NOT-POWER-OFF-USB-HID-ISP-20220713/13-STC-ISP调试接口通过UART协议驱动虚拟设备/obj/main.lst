C251 COMPILER V5.60.0,  main                                                               09/07/22  09:47:17  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN .\obj\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE src\main.c XSMALL INTR2 BROWSE DEBUG PRINT(.\obj\main.lst) OBJECT(.\ob
                    -j\main.obj) 

stmt  level    source

    1          /*---------------------------------------------------------------------*/
    2          /* --- STC MCU Limited ------------------------------------------------*/
    3          /* --- STC 1T Series MCU Demo Programme -------------------------------*/
    4          /* --- Mobile: (86)13922805190 ----------------------------------------*/
    5          /* --- Fax: 86-0513-55012956,55012947,55012969 ------------------------*/
    6          /* --- Tel: 86-0513-55012928,55012929,55012966 ------------------------*/
    7          /* --- Web: www.STCMCU.com --------------------------------------------*/
    8          /* --- Web: www.STCMCUDATA.com  ---------------------------------------*/
    9          /* --- QQ:  800003751 -------------------------------------------------*/
   10          /* Èç¹ûÒªÔÚ³ÌÐòÖÐÊ¹ÓÃ´Ë´úÂë,ÇëÔÚ³ÌÐòÖÐ×¢Ã÷Ê¹ÓÃÁËSTCµÄ×ÊÁÏ¼°³ÌÐò            */
   11          /*---------------------------------------------------------------------*/
   12          
   13          /*************  ¹¦ÄÜËµÃ÷    **************
   14          
   15          ±¾Àý³Ì»ùÓÚSTC32GºËÐÄ×ª½Ó°å£¨ÍÀÁúµ¶£©½øÐÐ±àÐ´²âÊÔ¡£
   16          
   17          Í¨¹ý´®¿ÚÁ¬½ÓSTC-ISP(V6.90ÒÔºó°æ±¾);
   18          
   19          STC-ISPµ÷ÊÔ½Ó¿ÚÀïÃæµÄÐéÄâ¼üÅÌÉÏµã»÷°´¼ü·¢ËÍÏàÓ¦µÄ¼üÖµµ½MCU;
   20          
   21          MCUÊÕµ½¼üÖµÖ´ÐÐ¶ÔÓ¦µÄ¹¦ÄÜ;
   22          
   23          ´®¿Ú(P3.0,P3.1)Ä¬ÈÏÉèÖÃ£º115200,N,8,1
   24          
   25          ÏÂÔØÊ±, Ñ¡ÔñÊ±ÖÓ 24MHZ (ÓÃ»§¿É×ÔÐÐÐÞ¸ÄÆµÂÊ)¡£
   26          
   27          ******************************************/
   28          
   29          #include "stc.h"
   30          #include "interface.h"
   31          #include "uart.h"
   32          #include "vk.h"
   33          #include "pic.h"
   34          
   35          void sys_init();
   36          
   37          BYTE xdata cod[8];
   38          
   39          void main()
   40          {
   41   1          sys_init();
   42   1          uart_init();
   43   1          EA = 1;
   44   1      
   45   1          while (1)
   46   1          {
   47   2              if (bUartRecvReady)
   48   2              {
   49   3                  switch (UartRxBuffer[1])
   50   3                  {
   51   4                  case VK_DIGIT_1:
   52   4                      SEG7_ShowString("%08lx", 0x1234abcdL);  //ÔÚÊýÂë¹ÜÉÏÏÔÊ¾×Ö·û´®
   53   4                      break;
   54   4                  case VK_DIGIT_2:
   55   4                      SEG7_ShowLong(0x98765432, 16);     //ÔÚÊýÂë¹ÜÉÏÏÔÊ¾4×Ö½Ú³¤ÕûÐÍÊý
   56   4                      break;
   57   4                  case VK_DIGIT_3:
   58   4                      SEG7_ShowFloat(3.1415);            //ÔÚÊýÂë¹ÜÉÏÏÔÊ¾IEEE754¸ñÊ½µ¥¾«¶È¸¡µãÊý
C251 COMPILER V5.60.0,  main                                                               09/07/22  09:47:17  PAGE 2   

   59   4                      break;
   60   4                  case VK_DIGIT_4:
   61   4                      cod[0] = 0x3f;
   62   4                      cod[1] = 0x06;
   63   4                      cod[2] = 0x5b;
   64   4                      cod[3] = 0x4f;
   65   4                      cod[4] = 0x66;
   66   4                      cod[5] = 0x6d;
   67   4                      cod[6] = 0x7d;
   68   4                      cod[7] = 0x27;
   69   4                      SEG7_ShowCode(cod);                //ÔÚÊýÂë¹ÜÉÏÖ±½ÓÏÔÊ¾Ëù¸øµÄ¶ÎÂë
   70   4                      break;
   71   4                  case VK_DIGIT_5:
   72   4                      cod[0] = 0x01;    //ÆÁ±ÎÎ»£¬P0ÓÐÐ§
   73   4                      cod[1] = 0xaa;    //P0×´Ì¬
   74   4                      LED40_SendData(cod, 2);            //¿ØÖÆDIP40µÄ¸÷¸ö¹Ü½ÅÉÏLEDµÄ×´Ì¬
   75   4                      break;
   76   4                  case VK_DIGIT_6:
   77   4                      cod[0] = 0x0f;    //ÆÁ±ÎÎ»£¬P0~P3ÓÐÐ§
   78   4                      cod[1] = 0x12;    //P0×´Ì¬
   79   4                      cod[2] = 0x34;    //P1×´Ì¬
   80   4                      cod[3] = 0x56;    //P2×´Ì¬
   81   4                      cod[4] = 0x78;    //P3×´Ì¬
   82   4                      LED40_SendData(cod, 5);            //¿ØÖÆDIP40µÄ¸÷¸ö¹Ü½ÅÉÏLEDµÄ×´Ì¬
   83   4                      break;
   84   4                  case VK_DIGIT_7:
   85   4                      cod[0] = 0x01;    //ÆÁ±ÎÎ»£¬P0ÓÐÐ§
   86   4                      cod[1] = 0xaa;    //P0×´Ì¬
   87   4                      LED64_SendData(cod, 2);            //¿ØÖÆDIP64µÄ¸÷¸ö¹Ü½ÅÉÏLEDµÄ×´Ì¬
   88   4                      break;
   89   4                  case VK_DIGIT_8:
   90   4                      cod[0] = 0x0f;    //ÆÁ±ÎÎ»£¬P0~P3ÓÐÐ§
   91   4                      cod[1] = 0x12;    //P0×´Ì¬
   92   4                      cod[2] = 0x34;    //P1×´Ì¬
   93   4                      cod[3] = 0x56;    //P2×´Ì¬
   94   4                      cod[4] = 0x78;    //P3×´Ì¬
   95   4                      LED64_SendData(cod, 5);            //¿ØÖÆDIP64µÄ¸÷¸ö¹Ü½ÅÉÏLEDµÄ×´Ì¬
   96   4                      break;
   97   4                  case VK_ALPHA_A:
   98   4                      LCD12864_DisplayOff();             //¹Ø±ÕLCD12864µÄÏÔÊ¾
   99   4                      break;
  100   4                  case VK_ALPHA_B:
  101   4                      LCD12864_DisplayOn();              //´ò¿ªLCD12864µÄÏÔÊ¾
  102   4                      break;
  103   4                  case VK_ALPHA_C:
  104   4                      LCD12864_CursorOff();              //Òþ²ØLCD12864µÄ¹â±ê
  105   4                      break;
  106   4                  case VK_ALPHA_D:
  107   4                      LCD12864_CursorOn();               //ÏÔÊ¾LCD12864µÄ¹â±ê
  108   4                      break;
  109   4                  case VK_ALPHA_E:
  110   4                      LCD12864_CursorMoveLeft();         //¹â±êÏò×óÒÆ¶¯Ò»¸öµ¥Î»£¨16¸öÏñËØ£©
  111   4                      break;
  112   4                  case VK_ALPHA_F:
  113   4                      LCD12864_CursorMoveRight();        //¹â±êÏòÓÒÒÆ¶¯Ò»¸öµ¥Î»£¨16¸öÏñËØ£©
  114   4                      break;
  115   4                  case VK_ALPHA_G:
  116   4                      LCD12864_CursorReturnHome();       //¹â±ê»Øµ½×óÉÏ½Ç³õÊ¼Î»ÖÃ
  117   4                      break;
  118   4                  case VK_ALPHA_H:
  119   4                      LCD12864_ScrollLeft();             //ÆÁÄ»Ïò×ó¹ö¶¯Ò»¸öµ¥Î»£¨16¸öÏñËØ£©
  120   4                      break;
  121   4                  case VK_ALPHA_I:
  122   4                      LCD12864_ScrollRight();            //ÆÁÄ»ÏòÓÒ¹ö¶¯Ò»¸öµ¥Î»£¨16¸öÏñËØ£©
  123   4                      break;
  124   4                  case VK_ALPHA_J:
C251 COMPILER V5.60.0,  main                                                               09/07/22  09:47:17  PAGE 3   

  125   4                      LCD12864_ScrollUp(16);             //ÆÁÄ»ÏòÉÏ¹ö¶¯Ò»¸öµ¥Î»£¨16¸öÏñËØ£©
  126   4                      break;
  127   4                  case VK_ALPHA_K:
  128   4                      LCD12864_AutoWrapOff();            //¹Ø±Õ×Ô¶¯»»ÐÐ¹¦ÄÜ
  129   4                      break;
  130   4                  case VK_ALPHA_L:
  131   4                      LCD12864_AutoWrapOn();             //¿ªÆô×Ô¶¯»»ÐÐ¹¦ÄÜ
  132   4                      break;
  133   4                  case VK_ALPHA_M:
  134   4                      LCD12864_ReverseLine(1);           //·´°×ÏÔÊ¾Ö¸¶¨µÄÐÐ
  135   4                      break;
  136   4                  case VK_ALPHA_N:
  137   4                      LCD12864_DisplayClear();           //Çå³ýÏÔÊ¾
  138   4                      break;
  139   4                  case VK_ALPHA_O:
  140   4                      LCD12864_ShowString(0, 0, "ÉîÛÚ¹úÐ¾ÈË¹¤ÖÇÄÜÓÐÏÞ¹«Ë¾");  //ÔÚLCD12864ÉÏÏÔÊ¾ASCIIÂëºÍ¼òÌåÖÐ
             -ÎÄ×Ö·û
  141   4                      break;
  142   4                  case VK_ALPHA_P:
  143   4                      LCD12864_ShowPicture(0, 0, 8, 64, (BYTE *)&LCD12864_IMG);  //ÔÚLCD12864ÆÁÄ»ÉÏÏÔÊ¾Í¼Æ¬
  144   4                      break;
  145   4                  case VK_ALPHA_Q:
  146   4                      OLED12864_DisplayOff();            //¹Ø±ÕOLED12864µÄÏÔÊ¾
  147   4                      break;
  148   4                  case VK_ALPHA_R:
  149   4                      OLED12864_DisplayOn();             //´ò¿ªOLED12864µÄÏÔÊ¾
  150   4                      break;
  151   4                  case VK_ALPHA_S:
  152   4                      OLED12864_DisplayContent();        //ÏÔÊ¾ÆÁÄ»ÄÚÈÝ
  153   4                      break;
  154   4                  case VK_ALPHA_T:
  155   4                      OLED12864_DisplayEntire();         //È«ÆÁµãÁÁ£¨ÓÃÓÚ²âÊÔ£©
  156   4                      break;
  157   4                  case VK_ALPHA_U:
  158   4                      OLED12864_HorizontalMirror();      //Ë®Æ½¾µÏñÏÔÊ¾
  159   4                      break;
  160   4                  case VK_ALPHA_V:
  161   4                      OLED12864_VerticalMirror();        //´¹Ö±¾µÏñÏÔÊ¾
  162   4                      break;
  163   4                  case VK_ALPHA_W:
  164   4                      OLED12864_DisplayReverse();        //·´°×ÏÔÊ¾
  165   4                      break;
  166   4                  case VK_ALPHA_X:
  167   4                      OLED12864_SetContrast(0x10);       //ÁÁ¶ÈÖµ£¨·¶Î§0¡«255£©
  168   4                      break;
  169   4                  case VK_ALPHA_Y:
  170   4                      OLED12864_SetContrast(0x80);       //ÁÁ¶ÈÖµ£¨·¶Î§0¡«255£©
  171   4                      break;
  172   4                  case VK_ALPHA_Z:
  173   4                      OLED12864_SetContrast(0xf0);       //ÁÁ¶ÈÖµ£¨·¶Î§0¡«255£©
  174   4                      break;
  175   4                  case VK_UP:
  176   4                      //²ÎÊý1£º²ÎÓë¹öÆÁµÄÆðÊ¼Ò³£¨·¶Î§0¡«7£©
  177   4                      //²ÎÊý2£º²ÎÓë¹öÆÁµÄ½áÊøÒ³£¨·¶Î§0¡«7£©
  178   4                      //²ÎÊý3£º¹öÆÁµÄÖÜÆÚÖµ£¨ÖÜÆÚµ¥Î»ÎªºÁÃë£©
  179   4                      OLED12864_ScrollUp(1, 6, 200);     //ÉèÖÃºÃ·½ÏòºóÍ¨¹ý¡°OLED12864_ScrollStart¡±Ö¸Áî¿ªÊ¼Ö´Ð
             -Ð
  180   4                      break;
  181   4                  case VK_DOWN:
  182   4                      OLED12864_ScrollStart();           //¿ªÊ¼Ö´ÐÐ¹ö¶¯²Ù×÷
  183   4                      break;
  184   4                  case VK_LEFT:
  185   4                      //²ÎÊý1£º²ÎÓë¹öÆÁµÄÆðÊ¼Ò³£¨·¶Î§0¡«7£©
  186   4                      //²ÎÊý2£º²ÎÓë¹öÆÁµÄ½áÊøÒ³£¨·¶Î§0¡«7£©
  187   4                      //²ÎÊý3£º¹öÆÁµÄÖÜÆÚÖµ£¨ÖÜÆÚµ¥Î»ÎªºÁÃë£©
  188   4                      OLED12864_ScrollLeft(0, 2, 200);   //ÉèÖÃºÃ·½ÏòºóÍ¨¹ý¡°OLED12864_ScrollStart¡±Ö¸Áî¿ªÊ¼Ö´Ð
C251 COMPILER V5.60.0,  main                                                               09/07/22  09:47:17  PAGE 4   

             -Ð
  189   4                      break;
  190   4                  case VK_RIGHT:
  191   4                      //²ÎÊý1£º²ÎÓë¹öÆÁµÄÆðÊ¼Ò³£¨·¶Î§0¡«7£©
  192   4                      //²ÎÊý2£º²ÎÓë¹öÆÁµÄ½áÊøÒ³£¨·¶Î§0¡«7£©
  193   4                      //²ÎÊý3£º¹öÆÁµÄÖÜÆÚÖµ£¨ÖÜÆÚµ¥Î»ÎªºÁÃë£©
  194   4                      OLED12864_ScrollRight(0, 2, 200);  //ÉèÖÃºÃ·½ÏòºóÍ¨¹ý¡°OLED12864_ScrollStart¡±Ö¸Áî¿ªÊ¼Ö´Ð
             -Ð
  195   4                      break;
  196   4                  case VK_HOME:
  197   4                      OLED12864_SetAddressMode(0);       //Ñ°Ö·Ä£Ê½£¨0£ºË®Æ½Ñ°Ö·£» 1£º´¹Ö±Ñ°Ö·£» 2£ºÒ³Ñ°Ö·£©
  198   4                      break;
  199   4                  case VK_END:
  200   4                      OLED12864_SetAddressMode(1);       //Ñ°Ö·Ä£Ê½£¨0£ºË®Æ½Ñ°Ö·£» 1£º´¹Ö±Ñ°Ö·£» 2£ºÒ³Ñ°Ö·£©
  201   4                      break;
  202   4                  case VK_PRIOR:    //PageUp
  203   4                      OLED12864_ScrollStop();            //Í£Ö¹Ö´ÐÐ¹ö¶¯²Ù×÷
  204   4                      break;
  205   4                  case VK_NEXT:     //PageDown
  206   4                      OLED12864_ShowPicture(0, 0, 128, 8, (BYTE *)&OLED12864_IMG);  //ÔÚOLED12864ÆÁÄ»ÉÏÏÔÊ¾Í¼Æ¬
  207   4                      break;
  208   4                  }
  209   3      
  210   3                  uart_OUT_done();
  211   3              }
  212   2          }
  213   1      }
  214          
  215          void sys_init()
  216          {
  217   1          WTST = 0;  //ÉèÖÃ³ÌÐòÖ¸ÁîÑÓÊ±²ÎÊý£¬¸³ÖµÎª0¿É½«CPUÖ´ÐÐÖ¸ÁîµÄËÙ¶ÈÉèÖÃÎª×î¿ì
  218   1          EAXFR = 1; //À©Õ¹¼Ä´æÆ÷(XFR)·ÃÎÊÊ¹ÄÜ
  219   1          CKCON = 0; //Ìá¸ß·ÃÎÊXRAMËÙ¶È
  220   1      
  221   1          P0M1 = 0x00;   P0M0 = 0x00;   //ÉèÖÃÎª×¼Ë«Ïò¿Ú
  222   1          P1M1 = 0x00;   P1M0 = 0x00;   //ÉèÖÃÎª×¼Ë«Ïò¿Ú
  223   1          P2M1 = 0x00;   P2M0 = 0x00;   //ÉèÖÃÎª×¼Ë«Ïò¿Ú
  224   1          P3M1 = 0x00;   P3M0 = 0x00;   //ÉèÖÃÎª×¼Ë«Ïò¿Ú
  225   1          P4M1 = 0x00;   P4M0 = 0x00;   //ÉèÖÃÎª×¼Ë«Ïò¿Ú
  226   1          P5M1 = 0x00;   P5M0 = 0x00;   //ÉèÖÃÎª×¼Ë«Ïò¿Ú
  227   1          P6M1 = 0x00;   P6M0 = 0x00;   //ÉèÖÃÎª×¼Ë«Ïò¿Ú
  228   1          P7M1 = 0x00;   P7M0 = 0x00;   //ÉèÖÃÎª×¼Ë«Ïò¿Ú
  229   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =      2836     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =         8     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        31     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
