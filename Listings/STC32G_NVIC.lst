C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE STC32G_NVIC
OBJECT MODULE PLACED IN .\Objects\STC32G_NVIC.obj
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE Sources\Driver\src\STC32G_NVIC.c XSMALL FUNCTIONS(REENTRANT) OPTIMIZE(
                    -4,SPEED) BROWSE INCDIR(.\Sources\User;.\Sources\User\include;.\Sources\FreeRTOS\include;.\Sources\FreeRTOS\portable\STC3
                    -2G12K128;.\Sources\Driver\inc;.\Sources\Task\inc;.\Sources\ch395) DEBUG PRINT(.\Listings\STC32G_NVIC.lst) TABS(2) OBJECT
                    -(.\Objects\STC32G_NVIC.obj) 

stmt  level    source

    1          /*---------------------------------------------------------------------*/
    2          /* --- STC MCU Limited ------------------------------------------------*/
    3          /* --- STC 1T Series MCU Demo Programme -------------------------------*/
    4          /* --- Mobile: (86)13922805190 ----------------------------------------*/
    5          /* --- Fax: 86-0513-55012956,55012947,55012969 ------------------------*/
    6          /* --- Tel: 86-0513-55012928,55012929,55012966 ------------------------*/
    7          /* --- Web: www.STCMCU.com --------------------------------------------*/
    8          /* --- Web: www.STCMCUDATA.com  ---------------------------------------*/
    9          /* --- QQ:  800003751 -------------------------------------------------*/
   10          /* å¦‚æœè¦åœ¨ç¨‹åºä¸­ä½¿ç”¨æ­¤ä»£ç ,è¯·åœ¨ç¨‹åºä¸­æ³¨æ˜ä½¿ç”¨äº†STCçš„èµ„æ–™åŠç¨‹åº            */
   11          /*---------------------------------------------------------------------*/
   12          
   13          #include "STC32G_NVIC.h"
   14          #include "STC32G_PWM.h"
   15          #include "STC32G_CAN.h"
   16          
   17          //========================================================================
   18          // å‡½æ•°: NVIC_Timer0_Init
   19          // æè¿°: Timer0åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
   20          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
   21          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
   22          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
   23          // ç‰ˆæœ¬: V1.0, 2020-09-29
   24          //========================================================================
   25          uint8_t NVIC_Timer0_Init(uint8_t State, uint8_t Priority)
   26          {
   27   1        if(State <= ENABLE) Timer0_Interrupt(State); else  return FAIL;
   28   1        if(Priority <= Priority_3) Timer0_Priority(Priority); else  return FAIL;
   29   1        return SUCCESS;
   30   1      }
   31          
   32          //========================================================================
   33          // å‡½æ•°: NVIC_Timer1_Init
   34          // æè¿°: Timer1åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
   35          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
   36          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
   37          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
   38          // ç‰ˆæœ¬: V1.0, 2020-09-29
   39          //========================================================================
   40          uint8_t NVIC_Timer1_Init(uint8_t State, uint8_t Priority)
   41          {
   42   1        if(State <= ENABLE) Timer1_Interrupt(State); else  return FAIL;
   43   1        if(Priority <= Priority_3) Timer1_Priority(Priority); else  return FAIL;
   44   1        return SUCCESS;
   45   1      }
   46          
   47          //========================================================================
   48          // å‡½æ•°: NVIC_Timer2_Init
   49          // æè¿°: Timer2åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
   50          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
   51          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, 0.
   52          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
   53          // ç‰ˆæœ¬: V1.0, 2020-09-29
   54          //========================================================================
   55          uint8_t NVIC_Timer2_Init(uint8_t State, uint8_t Priority)
   56          {
C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 2   

   57   1        if(State <= ENABLE) Timer2_Interrupt(State); else  return FAIL;
   58   1        Priority = 0;
   59   1        return SUCCESS;
   60   1      }
   61          
   62          //========================================================================
   63          // å‡½æ•°: NVIC_Timer3_Init
   64          // æè¿°: Timer3åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
   65          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
   66          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, 0.
   67          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
   68          // ç‰ˆæœ¬: V1.0, 2020-09-29
   69          //========================================================================
   70          uint8_t NVIC_Timer3_Init(uint8_t State, uint8_t Priority)
   71          {
   72   1        if(State <= ENABLE) Timer3_Interrupt(State); else  return FAIL;
   73   1        Priority = 0;
   74   1        return SUCCESS;
   75   1      }
   76          
   77          //========================================================================
   78          // å‡½æ•°: NVIC_Timer4_Init
   79          // æè¿°: Timer4åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
   80          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
   81          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, NULL.
   82          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
   83          // ç‰ˆæœ¬: V1.0, 2020-09-29
   84          //========================================================================
   85          uint8_t NVIC_Timer4_Init(uint8_t State, uint8_t Priority)
   86          {
   87   1        if(State <= ENABLE) Timer4_Interrupt(State); else  return FAIL;
   88   1        Priority = 0;
   89   1        return SUCCESS;
   90   1      }
   91          
   92          //========================================================================
   93          // å‡½æ•°: NVIC_INT0_Init
   94          // æè¿°: INT0åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
   95          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
   96          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
   97          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
   98          // ç‰ˆæœ¬: V1.0, 2020-09-29
   99          //========================================================================
  100          uint8_t NVIC_INT0_Init(uint8_t State, uint8_t Priority)
  101          {
  102   1        if(State <= ENABLE) INT0_Interrupt(State); else  return FAIL;
  103   1        if(Priority <= Priority_3) INT0_Priority(Priority); else  return FAIL;
  104   1        return SUCCESS;
  105   1      }
  106          
  107          //========================================================================
  108          // å‡½æ•°: NVIC_INT1_Init
  109          // æè¿°: INT1åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  110          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  111          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  112          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  113          // ç‰ˆæœ¬: V1.0, 2020-09-29
  114          //========================================================================
  115          uint8_t NVIC_INT1_Init(uint8_t State, uint8_t Priority)
  116          {
  117   1        if(State <= ENABLE) INT1_Interrupt(State); else  return FAIL;
  118   1        if(Priority <= Priority_3) INT1_Priority(Priority); else  return FAIL;
  119   1        return SUCCESS;
  120   1      }
  121          
  122          //========================================================================
C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 3   

  123          // å‡½æ•°: NVIC_INT2_Init
  124          // æè¿°: INT2åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  125          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  126          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, 0.
  127          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  128          // ç‰ˆæœ¬: V1.0, 2020-09-29
  129          //========================================================================
  130          uint8_t NVIC_INT2_Init(uint8_t State, uint8_t Priority)
  131          {
  132   1        if(State <= ENABLE) INT2_Interrupt(State); else  return FAIL;
  133   1        Priority = 0;
  134   1        return SUCCESS;
  135   1      }
  136          
  137          //========================================================================
  138          // å‡½æ•°: NVIC_INT3_Init
  139          // æè¿°: INT3åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  140          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  141          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, 0.
  142          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  143          // ç‰ˆæœ¬: V1.0, 2020-09-29
  144          //========================================================================
  145          uint8_t NVIC_INT3_Init(uint8_t State, uint8_t Priority)
  146          {
  147   1        if(State <= ENABLE) INT3_Interrupt(State); else  return FAIL;
  148   1        Priority = 0;
  149   1        return SUCCESS;
  150   1      }
  151          
  152          //========================================================================
  153          // å‡½æ•°: NVIC_INT4_Init
  154          // æè¿°: INT4åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  155          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  156          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, 0.
  157          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  158          // ç‰ˆæœ¬: V1.0, 2020-09-29
  159          //========================================================================
  160          uint8_t NVIC_INT4_Init(uint8_t State, uint8_t Priority)
  161          {
  162   1        if(State <= ENABLE) INT4_Interrupt(State); else  return FAIL;
  163   1        Priority = 0;
  164   1        return SUCCESS;
  165   1      }
  166          
  167          //========================================================================
  168          // å‡½æ•°: NVIC_ADC_Init
  169          // æè¿°: ADCåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  170          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  171          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  172          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  173          // ç‰ˆæœ¬: V1.0, 2020-09-29
  174          //========================================================================
  175          uint8_t NVIC_ADC_Init(uint8_t State, uint8_t Priority)
  176          {
  177   1        if(State <= ENABLE) ADC_Interrupt(State); else  return FAIL;
  178   1        if(Priority <= Priority_3) ADC_Priority(Priority); else  return FAIL;
  179   1        return SUCCESS;
  180   1      }
  181          
  182          //========================================================================
  183          // å‡½æ•°: NVIC_CMP_Init
  184          // æè¿°: æ¯”è¾ƒå™¨åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  185          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, RISING_EDGE/FALLING_EDGE/DISABLE.
  186          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  187          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  188          // ç‰ˆæœ¬: V1.0, 2020-09-29
C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 4   

  189          //========================================================================
  190          uint8_t NVIC_CMP_Init(uint8_t State, uint8_t Priority)
  191          {
  192   1        if(State & RISING_EDGE) PIE = 1;      //å…è®¸ä¸Šå‡æ²¿ä¸­æ–­
  193   1        else  PIE = 0;      //ç¦æ­¢ä¸Šå‡æ²¿ä¸­æ–­
  194   1        if(State & FALLING_EDGE)  NIE = 1;    //å…è®¸ä¸‹é™æ²¿ä¸­æ–­
  195   1        else  NIE = 0;      //ç¦æ­¢ä¸Šå‡æ²¿ä¸­æ–­
  196   1        if(Priority <= Priority_3) CMP_Priority(Priority); else  return FAIL;
  197   1        return SUCCESS;
  198   1      }
  199          
  200          //========================================================================
  201          // å‡½æ•°: NVIC_I2C_Init
  202          // æè¿°: I2CåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  203          // å‚æ•°: Mode:     æ¨¡å¼, I2C_Mode_Master/I2C_Mode_Slave.
  204          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, I2C_Mode_Master: ENABLE/DISABLE.
  205          //                              I2C_Mode_Slave: I2C_ESTAI/I2C_ERXI/I2C_ETXI/I2C_ESTOI/DISABLE.
  206          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  207          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  208          // ç‰ˆæœ¬: V1.0, 2020-09-29
  209          //========================================================================
  210          uint8_t NVIC_I2C_Init(uint8_t Mode, uint8_t State, uint8_t Priority)
  211          {
  212   1        if(Mode > 1) return FAIL;
  213   1        if(Mode == 1) //I2C_Mode_Master
  214   1        {
  215   2          I2C_Master_Inturrupt(State);
  216   2        }
  217   1        else if(Mode == 0)  //I2C_Mode_Slave
  218   1        {
  219   2          I2CSLCR = (I2CSLCR & ~0x78) | State;
  220   2        }
  221   1        if(Priority <= Priority_3) CMP_Priority(Priority); else  return FAIL;
  222   1        return SUCCESS;
  223   1      }
  224          
  225          //========================================================================
  226          // å‡½æ•°: NVIC_UART1_Init
  227          // æè¿°: UART1åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  228          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  229          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  230          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  231          // ç‰ˆæœ¬: V1.0, 2020-09-29
  232          //========================================================================
  233          uint8_t NVIC_UART1_Init(uint8_t State, uint8_t Priority)
  234          {
  235   1        if(State <= ENABLE) UART1_Interrupt(State); else  return FAIL;
  236   1        if(Priority <= Priority_3) UART1_Priority(Priority); else  return FAIL;
  237   1        return SUCCESS;
  238   1      }
  239          
  240          //========================================================================
  241          // å‡½æ•°: NVIC_UART2_Init
  242          // æè¿°: UART2åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  243          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  244          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  245          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  246          // ç‰ˆæœ¬: V1.0, 2020-09-29
  247          //========================================================================
  248          uint8_t NVIC_UART2_Init(uint8_t State, uint8_t Priority)
  249          {
  250   1        if(State <= ENABLE) UART2_Interrupt(State); else  return FAIL;
  251   1        if(Priority <= Priority_3) UART2_Priority(Priority); else  return FAIL;
  252   1        return SUCCESS;
  253   1      }
  254          
C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 5   

  255          //========================================================================
  256          // å‡½æ•°: NVIC_UART3_Init
  257          // æè¿°: UART3åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  258          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  259          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  260          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  261          // ç‰ˆæœ¬: V1.0, 2020-09-29
  262          //========================================================================
  263          uint8_t NVIC_UART3_Init(uint8_t State, uint8_t Priority)
  264          {
  265   1        if(State <= ENABLE) UART3_Interrupt(State); else  return FAIL;
  266   1        if(Priority <= Priority_3) UART3_Priority(Priority); else  return FAIL;
  267   1        return SUCCESS;
  268   1      }
  269          
  270          //========================================================================
  271          // å‡½æ•°: NVIC_UART4_Init
  272          // æè¿°: UART4åµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  273          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  274          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  275          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  276          // ç‰ˆæœ¬: V1.0, 2020-09-29
  277          //========================================================================
  278          uint8_t NVIC_UART4_Init(uint8_t State, uint8_t Priority)
  279          {
  280   1        if(State <= ENABLE) UART4_Interrupt(State); else  return FAIL;
  281   1        if(Priority <= Priority_3) UART4_Priority(Priority); else  return FAIL;
  282   1        return SUCCESS;
  283   1      }
  284          
  285          //========================================================================
  286          // å‡½æ•°: NVIC_SPI_Init
  287          // æè¿°: SPIåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  288          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  289          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  290          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  291          // ç‰ˆæœ¬: V1.0, 2020-09-29
  292          //========================================================================
  293          uint8_t NVIC_SPI_Init(uint8_t State, uint8_t Priority)
  294          {
  295   1        if(State <= ENABLE) SPI_Interrupt(State); else  return FAIL;
  296   1        if(Priority <= Priority_3) SPI_Priority(Priority); else  return FAIL;
  297   1        return SUCCESS;
  298   1      }
  299          
  300          //========================================================================
  301          // å‡½æ•°: NVIC_RTC_Init
  302          // æè¿°: SPIåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  303          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ä¸­æ–­ä½¿èƒ½, 0x80:é—¹é’Ÿä¸­æ–­, 0x40:æ—¥ä¸­æ–­, 0x20:å°æ—¶ä¸­æ
             -–­, 0x10:åˆ†é’Ÿä¸­æ–­, 0x08:ç§’ä¸­æ–­, 0x04:1/2ç§’ä¸­æ–­, 0x02:1/8ç§’ä¸­æ–­, 0x01:1/32ç§’ä¸­æ–­ /DISABLE.
  304          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  305          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  306          // ç‰ˆæœ¬: V1.0, 2020-09-29
  307          //========================================================================
  308          uint8_t NVIC_RTC_Init(uint8_t State, uint8_t Priority)
  309          {
  310   1        if(Priority <= Priority_3) RTC_Priority(Priority); else  return FAIL;
  311   1        RTC_Interrupt(State); 
  312   1        return SUCCESS;
  313   1      }
  314          
  315          //========================================================================
  316          // å‡½æ•°: NVIC_PWM_Init
  317          // æè¿°: PWMåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  318          // å‚æ•°: Channel:  é€šé“, PWMA/PWMB.
  319          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, PWM_BIE/PWM_TIE/PWM_COMIE/PWM_CC8IE~PWM_CC1IE/PWM_UIE/DISABLE.
C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 6   

  320          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  321          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  322          // ç‰ˆæœ¬: V1.0, 2020-09-29
  323          //========================================================================
  324          uint8_t NVIC_PWM_Init(uint8_t Channel, uint8_t State, uint8_t Priority)
  325          {
  326   1        if(Channel > PWMB) return FAIL;
  327   1        if(Priority > Priority_3) return FAIL;
  328   1        switch(Channel)
  329   1        {
  330   2          case PWMA:
  331   2            PWMA_IER = State;
  332   2            PWMA_Priority(Priority);
  333   2          break;
  334   2      
  335   2          case PWMB:
  336   2            PWMB_IER = State;
  337   2            PWMB_Priority(Priority);
  338   2          break;
  339   2      
  340   2          default:
  341   2            PWMB_IER = State;
  342   2            Priority = 0;
  343   2          break;
  344   2        }
  345   1        return SUCCESS;
  346   1      }
  347          
  348          //========================================================================
  349          // å‡½æ•°: NVIC_DMA_ADC_Init
  350          // æè¿°: DMA ADCåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  351          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  352          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  353          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  354          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  355          // ç‰ˆæœ¬: V1.0, 2021-05-21
  356          //========================================================================
  357          uint8_t NVIC_DMA_ADC_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  358          {
  359   1        DMA_ADC_CFG &= ~0x0f;
  360   1        if(Priority <= Priority_3) DMA_ADC_CFG |= Priority << 2;
  361   1        if(Bus_Priority <= Priority_3) DMA_ADC_CFG |= Bus_Priority; //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  362   1        if(State == ENABLE)
  363   1          DMA_ADC_CFG |= 0x80;    //bit7 1:Enable Interrupt
  364   1        else
  365   1          DMA_ADC_CFG &= ~0x80;   //bit7 0:Disable Interrupt
  366   1        return SUCCESS;
  367   1      }
  368          
  369          //========================================================================
  370          // å‡½æ•°: NVIC_DMA_M2M_Init
  371          // æè¿°: DMA M2MåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  372          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  373          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  374          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  375          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  376          // ç‰ˆæœ¬: V1.0, 2021-05-21
  377          //========================================================================
  378          uint8_t NVIC_DMA_M2M_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  379          {
  380   1        DMA_M2M_CFG &= ~0x0f;
  381   1        if(Priority <= Priority_3) DMA_M2M_CFG |= Priority << 2;
  382   1        if(Bus_Priority <= Priority_3) DMA_M2M_CFG |= Bus_Priority; //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  383   1        if(State == ENABLE)
  384   1          DMA_M2M_CFG |= 0x80;    //bit7 1:Enable Interrupt
  385   1        else
C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 7   

  386   1          DMA_M2M_CFG &= ~0x80;   //bit7 0:Disable Interrupt
  387   1        return SUCCESS;
  388   1      }
  389          
  390          //========================================================================
  391          // å‡½æ•°: NVIC_DMA_SPI_Init
  392          // æè¿°: DMA SPIåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  393          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  394          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  395          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  396          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  397          // ç‰ˆæœ¬: V1.0, 2021-05-27
  398          //========================================================================
  399          uint8_t NVIC_DMA_SPI_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  400          {
  401   1        DMA_SPI_CFG &= ~0x0f;
  402   1        if(Priority <= Priority_3) DMA_SPI_CFG |= Priority << 2;
  403   1        if(Bus_Priority <= Priority_3) DMA_SPI_CFG |= Bus_Priority; //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  404   1        if(State == ENABLE)
  405   1          DMA_SPI_CFG |= 0x80;    //bit7 1:Enable Interrupt
  406   1        else
  407   1          DMA_SPI_CFG &= ~0x80;   //bit7 0:Disable Interrupt
  408   1        return SUCCESS;
  409   1      }
  410          
  411          //========================================================================
  412          // å‡½æ•°: NVIC_DMA_UART1_Tx_Init
  413          // æè¿°: DMA UART1 TxåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  414          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  415          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  416          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  417          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  418          // ç‰ˆæœ¬: V1.0, 2021-05-21
  419          //========================================================================
  420          uint8_t NVIC_DMA_UART1_Tx_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  421          {
  422   1        DMA_UR1T_CFG &= ~0x0f;
  423   1        if(Priority <= Priority_3) DMA_UR1T_CFG |= Priority << 2;
  424   1        if(Bus_Priority <= Priority_3) DMA_UR1T_CFG |= Bus_Priority;  //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  425   1        if(State == ENABLE)
  426   1          DMA_UR1T_CFG |= 0x80;   //bit7 1:Enable Interrupt
  427   1        else
  428   1          DMA_UR1T_CFG &= ~0x80;  //bit7 0:Disable Interrupt
  429   1        return SUCCESS;
  430   1      }
  431          
  432          //========================================================================
  433          // å‡½æ•°: NVIC_DMA_UART1_Rx_Init
  434          // æè¿°: DMA UART1 RxåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  435          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  436          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  437          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  438          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  439          // ç‰ˆæœ¬: V1.0, 2021-05-21
  440          //========================================================================
  441          uint8_t NVIC_DMA_UART1_Rx_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  442          {
  443   1        DMA_UR1R_CFG &= ~0x0f;
  444   1        if(Priority <= Priority_3) DMA_UR1R_CFG |= Priority << 2;
  445   1        if(Bus_Priority <= Priority_3) DMA_UR1R_CFG |= Bus_Priority;  //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  446   1        if(State == ENABLE)
  447   1          DMA_UR1R_CFG |= 0x80;   //bit7 1:Enable Interrupt
  448   1        else
  449   1          DMA_UR1R_CFG &= ~0x80;  //bit7 0:Disable Interrupt
  450   1        return SUCCESS;
  451   1      }
C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 8   

  452          
  453          //========================================================================
  454          // å‡½æ•°: NVIC_DMA_UART2_Tx_Init
  455          // æè¿°: DMA UART2 TxåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  456          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  457          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  458          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  459          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  460          // ç‰ˆæœ¬: V1.0, 2021-05-21
  461          //========================================================================
  462          uint8_t NVIC_DMA_UART2_Tx_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  463          {
  464   1        DMA_UR2T_CFG &= ~0x0f;
  465   1        if(Priority <= Priority_3) DMA_UR2T_CFG |= Priority << 2;
  466   1        if(Bus_Priority <= Priority_3) DMA_UR2T_CFG |= Bus_Priority;  //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  467   1        if(State == ENABLE)
  468   1          DMA_UR2T_CFG |= 0x80;   //bit7 1:Enable Interrupt
  469   1        else
  470   1          DMA_UR2T_CFG &= ~0x80;  //bit7 0:Disable Interrupt
  471   1        return SUCCESS;
  472   1      }
  473          
  474          //========================================================================
  475          // å‡½æ•°: NVIC_DMA_UART2_Rx_Init
  476          // æè¿°: DMA UART2 RxåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  477          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  478          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  479          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  480          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  481          // ç‰ˆæœ¬: V1.0, 2021-05-21
  482          //========================================================================
  483          uint8_t NVIC_DMA_UART2_Rx_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  484          {
  485   1        DMA_UR2R_CFG &= ~0x0f;
  486   1        if(Priority <= Priority_3) DMA_UR2R_CFG |= Priority << 2;
  487   1        if(Bus_Priority <= Priority_3) DMA_UR2R_CFG |= Bus_Priority;  //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  488   1        if(State == ENABLE)
  489   1          DMA_UR2R_CFG |= 0x80;   //bit7 1:Enable Interrupt
  490   1        else
  491   1          DMA_UR2R_CFG &= ~0x80;  //bit7 0:Disable Interrupt
  492   1        return SUCCESS;
  493   1      }
  494          
  495          //========================================================================
  496          // å‡½æ•°: NVIC_DMA_UART3_Tx_Init
  497          // æè¿°: DMA UART3 TxåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  498          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  499          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  500          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  501          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  502          // ç‰ˆæœ¬: V1.0, 2021-05-21
  503          //========================================================================
  504          uint8_t NVIC_DMA_UART3_Tx_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  505          {
  506   1        DMA_UR3T_CFG &= ~0x0f;
  507   1        if(Priority <= Priority_3) DMA_UR3T_CFG |= Priority << 2;
  508   1        if(Bus_Priority <= Priority_3) DMA_UR3T_CFG |= Bus_Priority;  //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  509   1        if(State == ENABLE)
  510   1          DMA_UR3T_CFG |= 0x80;   //bit7 1:Enable Interrupt
  511   1        else
  512   1          DMA_UR3T_CFG &= ~0x80;  //bit7 0:Disable Interrupt
  513   1        return SUCCESS;
  514   1      }
  515          
  516          //========================================================================
  517          // å‡½æ•°: NVIC_DMA_UART3_Rx_Init
C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 9   

  518          // æè¿°: DMA UART3 RxåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  519          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  520          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  521          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  522          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  523          // ç‰ˆæœ¬: V1.0, 2021-05-21
  524          //========================================================================
  525          uint8_t NVIC_DMA_UART3_Rx_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  526          {
  527   1        DMA_UR3R_CFG &= ~0x0f;
  528   1        if(Priority <= Priority_3) DMA_UR3R_CFG |= Priority << 2;
  529   1        if(Bus_Priority <= Priority_3) DMA_UR3R_CFG |= Bus_Priority;  //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  530   1        if(State == ENABLE)
  531   1          DMA_UR3R_CFG |= 0x80;   //bit7 1:Enable Interrupt
  532   1        else
  533   1          DMA_UR3R_CFG &= ~0x80;  //bit7 0:Disable Interrupt
  534   1        return SUCCESS;
  535   1      }
  536          
  537          //========================================================================
  538          // å‡½æ•°: NVIC_DMA_UART4_Tx_Init
  539          // æè¿°: DMA UART4 TxåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  540          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  541          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  542          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  543          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  544          // ç‰ˆæœ¬: V1.0, 2021-05-21
  545          //========================================================================
  546          uint8_t NVIC_DMA_UART4_Tx_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  547          {
  548   1        DMA_UR4T_CFG &= ~0x0f;
  549   1        if(Priority <= Priority_3) DMA_UR4T_CFG |= Priority << 2;
  550   1        if(Bus_Priority <= Priority_3) DMA_UR4T_CFG |= Bus_Priority;  //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  551   1        if(State == ENABLE)
  552   1          DMA_UR4T_CFG |= 0x80;   //bit7 1:Enable Interrupt
  553   1        else
  554   1          DMA_UR4T_CFG &= ~0x80;  //bit7 0:Disable Interrupt
  555   1        return SUCCESS;
  556   1      }
  557          
  558          //========================================================================
  559          // å‡½æ•°: NVIC_DMA_UART4_Rx_Init
  560          // æè¿°: DMA UART4 RxåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  561          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  562          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  563          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  564          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  565          // ç‰ˆæœ¬: V1.0, 2021-05-21
  566          //========================================================================
  567          uint8_t NVIC_DMA_UART4_Rx_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  568          {
  569   1        DMA_UR4R_CFG &= ~0x0f;
  570   1        if(Priority <= Priority_3) DMA_UR4R_CFG |= Priority << 2;
  571   1        if(Bus_Priority <= Priority_3) DMA_UR4R_CFG |= Bus_Priority;  //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  572   1        if(State == ENABLE)
  573   1          DMA_UR4R_CFG |= 0x80;   //bit7 1:Enable Interrupt
  574   1        else
  575   1          DMA_UR4R_CFG &= ~0x80;  //bit7 0:Disable Interrupt
  576   1        return SUCCESS;
  577   1      }
  578          
  579          //========================================================================
  580          // å‡½æ•°: NVIC_DMA_LCM_Init
  581          // æè¿°: DMA LCMåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  582          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  583          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 10  

  584          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  585          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  586          // ç‰ˆæœ¬: V1.0, 2021-05-21
  587          //========================================================================
  588          uint8_t NVIC_DMA_LCM_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  589          {
  590   1        DMA_LCM_CFG &= ~0x0f;
  591   1        if(Priority <= Priority_3) DMA_LCM_CFG |= Priority << 2;
  592   1        if(Bus_Priority <= Priority_3) DMA_LCM_CFG |= Bus_Priority; //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  593   1        if(State == ENABLE)
  594   1          DMA_LCM_CFG |= 0x80;    //bit7 1:Enable Interrupt
  595   1        else
  596   1          DMA_LCM_CFG &= ~0x80;   //bit7 0:Disable Interrupt
  597   1        return SUCCESS;
  598   1      }
  599          
  600          //========================================================================
  601          // å‡½æ•°: NVIC_LCM_Init
  602          // æè¿°: LCMåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  603          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  604          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  605          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  606          // ç‰ˆæœ¬: V1.0, 2021-05-21
  607          //========================================================================
  608          uint8_t NVIC_LCM_Init(uint8_t State, uint8_t Priority)
  609          {
  610   1        LCMIFCFG &= ~0x30;
  611   1        if(Priority <= Priority_3) LCMIFCFG |= Priority << 4;
  612   1        if(State == ENABLE)
  613   1          LCMIFCFG |= 0x80;   //bit7 1:Enable Interrupt
  614   1        else
  615   1          LCMIFCFG &= ~0x80;    //bit7 0:Disable Interrupt
  616   1        return SUCCESS;
  617   1      }
  618          
  619          //========================================================================
  620          // å‡½æ•°: NVIC_DMA_I2CT_Init
  621          // æè¿°: DMA I2C TxåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  622          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  623          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  624          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  625          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  626          // ç‰ˆæœ¬: V1.0, 2022-03-25
  627          //========================================================================
  628          uint8_t NVIC_DMA_I2CT_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
  629          {
  630   1        DMA_I2CT_CFG &= ~0x0f;
  631   1        if(Priority <= Priority_3) DMA_I2CT_CFG |= Priority << 2;
  632   1        if(Bus_Priority <= Priority_3) DMA_I2CT_CFG |= Bus_Priority;  //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  633   1        if(State == ENABLE)
  634   1          DMA_I2CT_CFG |= 0x80;   //bit7 1:Enable Interrupt
  635   1        else
  636   1          DMA_I2CT_CFG &= ~0x80;  //bit7 0:Disable Interrupt
  637   1        return SUCCESS;
  638   1      }
  639          
  640          //========================================================================
  641          // å‡½æ•°: NVIC_DMA_I2CR_Init
  642          // æè¿°: DMA I2C RxåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  643          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  644          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  645          // å‚æ•°: Bus_Priority: æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  646          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  647          // ç‰ˆæœ¬: V1.0, 2022-03-25
  648          //========================================================================
  649          uint8_t NVIC_DMA_I2CR_Init(uint8_t State, uint8_t Priority, uint8_t Bus_Priority)
C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 11  

  650          {
  651   1        DMA_I2CR_CFG &= ~0x0f;
  652   1        if(Priority <= Priority_3) DMA_I2CR_CFG |= Priority << 2;
  653   1        if(Bus_Priority <= Priority_3) DMA_I2CR_CFG |= Bus_Priority;  //æ•°æ®æ€»çº¿è®¿é—®ä¼˜å…ˆçº§
  654   1        if(State == ENABLE)
  655   1          DMA_I2CR_CFG |= 0x80;   //bit7 1:Enable Interrupt
  656   1        else
  657   1          DMA_I2CR_CFG &= ~0x80;  //bit7 0:Disable Interrupt
  658   1        return SUCCESS;
  659   1      }
  660          
  661          //========================================================================
  662          // å‡½æ•°: NVIC_CAN_Init
  663          // æè¿°: CANåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  664          // å‚æ•°: Channel:  é€šé“, CAN1/CAN2.
  665          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  666          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  667          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  668          // ç‰ˆæœ¬: V1.0, 2023-03-27
  669          //========================================================================
  670          uint8_t NVIC_CAN_Init(uint8_t Channel, uint8_t State, uint8_t Priority)
  671          {
  672   1        if(Channel > CAN2) return FAIL;
  673   1        if(Priority > Priority_3) return FAIL;
  674   1        switch(Channel)
  675   1        {
  676   2          case CAN1:
  677   2            if(State == ENABLE)
  678   2              CANIE = 1;    //bit7 1:Enable Interrupt
  679   2            else
  680   2              CANIE = 0;    //bit7 0:Disable Interrupt
  681   2            CAN1_Priority(Priority);
  682   2          break;
  683   2      
  684   2          case CAN2:
  685   2            if(State == ENABLE)
  686   2              CAN2IE = 1;   //bit7 1:Enable Interrupt
  687   2            else
  688   2              CAN2IE = 0;   //bit7 0:Disable Interrupt
  689   2            CAN2_Priority(Priority);
  690   2          break;
  691   2      
  692   2          default:
  693   2            return FAIL;
  694   2          break;
  695   2        }
  696   1        return SUCCESS;
  697   1      }
  698          
  699          //========================================================================
  700          // å‡½æ•°: NVIC_LIN_Init
  701          // æè¿°: LINåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨åˆå§‹åŒ–.
  702          // å‚æ•°: State:    ä¸­æ–­ä½¿èƒ½çŠ¶æ€, ENABLE/DISABLE.
  703          // å‚æ•°: Priority: ä¸­æ–­ä¼˜å…ˆçº§, Priority_0,Priority_1,Priority_2,Priority_3.
  704          // è¿”å›: æ‰§è¡Œç»“æœ SUCCESS/FAIL.
  705          // ç‰ˆæœ¬: V1.0, 2020-09-29
  706          //========================================================================
  707          uint8_t NVIC_LIN_Init(uint8_t State, uint8_t Priority)
  708          {
  709   1        if(State <= ENABLE) LIN_Interrupt(State); else  return FAIL;
  710   1        if(Priority <= Priority_3) LIN_Priority(Priority); else  return FAIL;
  711   1        return SUCCESS;
  712   1      }
  713          


C251 COMPILER V5.60.0,  STC32G_NVIC                                                        24/03/23  00:55:32  PAGE 12  

Module Information          Static   Overlayable
------------------------------------------------
  code size            =      2794     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
